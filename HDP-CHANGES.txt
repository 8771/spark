Changes only in Hortonworks github and not in Apache SPARK-2.1.0 and hence not covered by CHANGES.txt.

INCOMPATIBLE CHANGES

NEW FEATURES

IMPROVEMENTS
    RMP-6461: Add --jarDirs and SPARK_APP_JARS to include directories in spark-submit and spark-shell
    RMP-6448: hdp.version
    RMP-6954: SparkSQL Ranger integration for fine grained access control in Spark 2.1
    BUG-62302 Support HiveServer2 delegation token acquisition in Spark
    BUG-70581 Add hadoop-3.0 profile

BUG FIXES
    BUG-63630	SPARK-14387. Enable Hive-1.x ORC compatibility with spark.sql.hive.convertMetastoreOrc
    BUG-58486   Use cache file created by ambari as spark.yarn.archive
    BUG-48982   Add hadoop lzo jar to the classpath
    BUG-52253   Support configuring YARN correctly for multiple Spark versions and their aux-services
    BUG-60289   Spark2 jersey and Timeline Jersey are incompatible
    BUG-59418   changes to KafkaRDD MessageAndMetadata to use named params
    BUG-61726   SparkLauncherSuite unit test failing
    BUG-63858   S3CountLines application fails in yarn-cluster mode: user should not call system.exit(0) terminate the application in spark 2
    BUG-68592   Implement `spark-llap2` package for Spark 2.1.x
    BUG-71525   Support `spark.sql.hive.llap` configuration
    SPARK-207   Remove hardcode FS scheme from Spark archive
    BUG-77149   Spark2 build failure in atlantic because [SPARK-17979] SPARK_YARN_USER_ENV and SPARK_JAVA_OPTS depreciated.
    BUG-79168   Spark2 compilation failure because (1)LLAP related patches are missing (2) conflict between hdp-master and Apache/master in the Client.scala
    BUG-77776   Fix STS error handling logic on HiveSQLException
    BUG-77400   Fix HiveServer2 delegation token acquisition

    (Backport from 2.2.1)
    [SPARK-21663][TESTS] test("remote fetch below max RPC message size") should call masterTracker.stop() in MapOutputTrackerSuite
    [SPARK-21596][SS] Ensure places calling HDFSMetadataLog.get check the return value
    [SPARK-21523][ML] update breeze to 0.13.2 for an emergency bugfix in strong wolfe line search
    [SPARK-21503][UI] Spark UI shows incorrect task status for a killed Executor Process
    Revert "[SPARK-21567][SQL] Dataset should work with type alias"
    [SPARK-21567][SQL] Dataset should work with type alias
    [SPARK-21648][SQL] Fix confusing assert failure in JDBC source when parallel fetching parameters are not properly provided.
    [SPARK-21565][SS] Propagate metadata in attribute replacement.
    [SPARK-21374][CORE] Fix reading globbed paths from S3 into DF with disabled FS cache
    [SPARK-21647][SQL] Fix SortMergeJoin when using CROSS
    [SPARK-21621][CORE] Reset numRecordsWritten after DiskBlockObjectWriter.commitAndGet called
    [SPARK-21588][SQL] SQLContext.getConf(key, null) should return null
    [SPARK-21580][SQL] Integers in aggregation expressions are wrongly taken as group-by ordinal
    [SPARK-21330][SQL] Bad partitioning does not allow to read a JDBC table with extreme values on the partition column
    Fix Java SimpleApp spark application
    [SPARK-12717][PYTHON][BRANCH-2.2] Adding thread-safe broadcast pickle registry
    [SPARK-21546][SS] dropDuplicates should ignore watermark when it's not a key
    [SPARK-21597][SS] Fix a potential overflow issue in EventTimeStats
    [SPARK-21339][CORE] spark-shell --packages option does not add jars to classpath on windows
    [SPARK-21593][DOCS] Fix 2 rendering errors on configuration page
    [SPARK-21522][CORE] Fix flakiness in LauncherServerSuite.
    Revert "[SPARK-19451][SQL] rangeBetween method should accept Long value as boundary"
    [SPARK-19451][SQL] rangeBetween method should accept Long value as boundary
    [SPARK-21555][SQL] RuntimeReplaceable should be compared semantically by its canonicalized child
    [SPARK-21508][DOC] Fix example code provided in Spark Streaming Documentation
    [SPARK-21306][ML] OneVsRest should support setWeightCol
    [SPARK-21538][SQL] Attribute resolution inconsistency in the Dataset API
    [SPARK-21494][NETWORK] Use correct app id when authenticating to external service.
    [SPARK-21447][WEB UI] Spark history server fails to render compressed
    [SPARK-21383][YARN] Fix the YarnAllocator allocates more Resource
    [SPARK-20904][CORE] Don't report task failures to driver during shutdown.
    [SPARK-21434][PYTHON][DOCS] Add pyspark pip documentation.
    [SPARK-21243][CORE] Limit no. of map outputs in a shuffle fetch
    [SPARK-21333][DOCS] Removed invalid joinTypes from javadoc of Dataset#joinWith
    [SPARK-21446][SQL] Fix setAutoCommit never executed
    [SPARK-21464][SS] Minimize deprecation warnings caused by ProcessingTime class
    [SPARK-21441][SQL] Incorrect Codegen in SortMergeJoinExec results failures in some cases
    [SPARK-21414] Refine SlidingWindowFunctionFrame to avoid OOM.
    [SPARK-21457][SQL] ExternalCatalog.listPartitions should correctly handle partition values with dot
    [SPARK-21445] Make IntWrapper and LongWrapper in UTF8String Serializable
    [SPARK-21332][SQL] Incorrect result type inferred for some decimal expressions
    [SPARK-21321][SPARK CORE] Spark very verbose on shutdown
    [SPARK-21267][DOCS][MINOR] Follow up to avoid referencing programming-guide redirector
    [SPARK-21344][SQL] BinaryType comparison does signed byte array comparison
    [SPARK-21376][YARN] Fix yarn client token expire issue when cleaning the staging files in long running scenario
    Revert "[SPARK-18646][REPL] Set parent classloader as null for ExecutorClassLoader"
    [SPARK-18646][REPL] Set parent classloader as null for ExecutorClassLoader
    [SPARK-21219][CORE] Task retry occurs on same executor due to race coâ€¦
    [SPARK-21366][SQL][TEST] Add sql test for window functions
    [SPARK-21369][CORE] Don't use Scala Tuple2 in common/network-*
    [SPARK-21272] SortMergeJoin LeftAnti does not update numOutputRows
    [SPARK-21342] Fix DownloadCallback to work well with RetryingBlockFetcher.
    [SPARK-21083][SQL][BRANCH-2.2] Store zero size and row count when analyzing empty table
    [SPARK-21343] Refine the document for spark.reducer.maxReqSizeShuffleToMem.
    [SPARK-20342][CORE] Update task accumulators before sending task end event.
    [SPARK-21345][SQL][TEST][TEST-MAVEN] SparkSessionBuilderSuite should clean up stopped sessions.
    [SPARK-21228][SQL][BRANCH-2.2] InSet incorrect handling of structs
    [SPARK-21069][SS][DOCS] Add rate source to programming guide.
    [SPARK-21267][SS][DOCS] Update Structured Streaming Documentation
    [SS][MINOR] Fix flaky test in DatastreamReaderWriterSuite. temp checkpoint dir should be deleted
    [SPARK-21312][SQL] correct offsetInBytes in UnsafeRow.writeToStream
    [SPARK-21300][SQL] ExternalMapToCatalyst should null-check map key prior to converting to internal value.
    [SPARK-20256][SQL] SessionState should be created more lazily
    [SPARK-21170][CORE] Utils.tryWithSafeFinallyAndFailureCallbacks throws IllegalArgumentException: Self-suppression not permitted

    (Backport from 2.3)
    SPARK-21376 Fix yarn client token expire issue when cleaning the staging files in long running scenario
    SPARK-21377 Make jars specify with --jars/--packages load-able in AM's credential renwer
    SPARK-21475 Use NIO's Files API to replace FileInputStream/FileOutputStream in some critical paths

    (Jira in Apache Spark is IN PROGRESS)
    SPARK-15844 HistoryServer doesn't come up if spark.authenticate = true
